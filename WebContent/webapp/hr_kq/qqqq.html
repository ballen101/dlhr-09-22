<!DOCTYPE html><html lang="en" template="webapp/templet/default/main_line_pop.html" workpath="webapp/hr_kq"><head><meta charset="UTF-8"><title>Title</title></head><body><meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../js/easyui/themes/default/easyui.css"><link rel="stylesheet" type="text/css" href="../js/easyui/themes/icon.css"><link rel="stylesheet" type="text/css" href="../js/css/corsair.css"><script type="text/javascript" src="../js/easyui/jquery.min.js"></script><script type="text/javascript" src="../js/easyui/jquery.easyui.min.js"></script><script type="text/javascript" src="../js/easyui/easyloader.js"></script><script type="text/javascript" src="../js/easyui/locale/easyui-lang-zh_CN.js"></script><script type="text/javascript" src="../js/cjquery.min.js"></script><script type="text/javascript" src="../js/icefall.min.js"></script><script type="text/javascript" src="../js/common/jsonbanding2.js"></script><script type="text/javascript" src="../js/common/cSearchDlg.min.js"></script><script type="text/javascript" src="../js/common/cFindDlg.min.js"></script><script type="text/javascript" src="../js/common/mainline2.min.js"></script><title></title><script type="text/javascript" style="cserver_js"> var comUrl_dic227 = {index: 'dic227',type: 'combobox',valueField: 'dictvalue',textField: 'language1',jsondata:[{"language1":"制单","dictvalue":"1"},{"language1":"进行中","dictvalue":"2"},{"language1":"复议","dictvalue":"3"},{"language1":"二次回访","dictvalue":"4"},{"language1":"完成","dictvalue":"9"},{"language1":"关闭","dictvalue":"10"},{"language1":"作废","dictvalue":"12"}], formator: function (value, row) { var jsondata = comUrl_dic227.jsondata; if (value == 'get_com_data') { return jsondata; } if (value == 'get_com_url') { return comUrl_dic227; } if (comUrl_dic227.type == 'combobox') { for (var i = 0; i < jsondata.length; i++) { if (value == jsondata[i][comUrl_dic227.valueField]) return jsondata[i][comUrl_dic227.textField]; } } if (comUrl_dic227.type == 'combotree') { var txt = $getTreeTextById(jsondata, value); if (txt == undefined) txt = value; return txt; } return value; } }; comUrl_dic227.editor= {type: 'combobox', options: {valueField:comUrl_dic227.valueField, textField:comUrl_dic227.textField, data: comUrl_dic227.jsondata}}; var comUrl_dic5 = {index: 'dic5',type: 'combobox',valueField: 'dictvalue',textField: 'language1',jsondata:[{"language1":"是","dictvalue":"1"},{"language1":"否","dictvalue":"2"}], formator: function (value, row) { var jsondata = comUrl_dic5.jsondata; if (value == 'get_com_data') { return jsondata; } if (value == 'get_com_url') { return comUrl_dic5; } if (comUrl_dic5.type == 'combobox') { for (var i = 0; i < jsondata.length; i++) { if (value == jsondata[i][comUrl_dic5.valueField]) return jsondata[i][comUrl_dic5.textField]; } } if (comUrl_dic5.type == 'combotree') { var txt = $getTreeTextById(jsondata, value); if (txt == undefined) txt = value; return txt; } return value; } }; comUrl_dic5.editor= {type: 'combobox', options: {valueField:comUrl_dic5.valueField, textField:comUrl_dic5.textField, data: comUrl_dic5.jsondata}}; var comUrl_dic960 = {index: 'dic960',type: 'combobox',valueField: 'dictvalue',textField: 'language1',jsondata:[{"language1":"总裁","dictvalue":"1"},{"language1":"副总裁","dictvalue":"2"},{"language1":"助理副总裁","dictvalue":"3"},{"language1":"总监级2.0-2.3","dictvalue":"4"},{"language1":"经理级3.0-3.3","dictvalue":"5"},{"language1":"4-8级员工","dictvalue":"6"}], formator: function (value, row) { var jsondata = comUrl_dic960.jsondata; if (value == 'get_com_data') { return jsondata; } if (value == 'get_com_url') { return comUrl_dic960; } if (comUrl_dic960.type == 'combobox') { for (var i = 0; i < jsondata.length; i++) { if (value == jsondata[i][comUrl_dic960.valueField]) return jsondata[i][comUrl_dic960.textField]; } } if (comUrl_dic960.type == 'combotree') { var txt = $getTreeTextById(jsondata, value); if (txt == undefined) txt = value; return txt; } return value; } }; comUrl_dic960.editor= {type: 'combobox', options: {valueField:comUrl_dic960.valueField, textField:comUrl_dic960.textField, data: comUrl_dic960.jsondata}}; var comUrl_dic1019 = {index: 'dic1019',type: 'combobox',valueField: 'dictvalue',textField: 'language1',jsondata:[{"language1":"年假","dictvalue":"1"},{"language1":"加班","dictvalue":"2"},{"language1":"值班","dictvalue":"3"},{"language1":"出差","dictvalue":"4"},{"language1":"特殊","dictvalue":"5"}], formator: function (value, row) { var jsondata = comUrl_dic1019.jsondata; if (value == 'get_com_data') { return jsondata; } if (value == 'get_com_url') { return comUrl_dic1019; } if (comUrl_dic1019.type == 'combobox') { for (var i = 0; i < jsondata.length; i++) { if (value == jsondata[i][comUrl_dic1019.valueField]) return jsondata[i][comUrl_dic1019.textField]; } } if (comUrl_dic1019.type == 'combotree') { var txt = $getTreeTextById(jsondata, value); if (txt == undefined) txt = value; return txt; } return value; } }; comUrl_dic1019.editor= {type: 'combobox', options: {valueField:comUrl_dic1019.valueField, textField:comUrl_dic1019.textField, data: comUrl_dic1019.jsondata}}; var comUrls = [ { index: "dic227", type: "combobox", url: "/web/dict/getdictvalues.co?dicid=227", valueField: 'dictvalue', textField: 'language1' }, { index: "dic5", type: "combobox", url: "/web/dict/getdictvalues.co?dicid=5", valueField: 'dictvalue', textField: 'language1' }, { index: "dic960", type: "combobox", url: "/web/dict/getdictvalues.co?dicid=960", valueField: 'dictvalue', textField: 'language1' }, { index: "dic1019", type: "combobox", url: "/web/dict/getdictvalues.co?dicid=1019", valueField: 'dictvalue', textField: 'language1' } ]; var formtype = 1; var allowAtt = false; var allowWF = true;</script> <script type="text/javascript"> var listGridColumns = [ {field: 'wocode', title: '调休编码', width: 100}, {field: 'employee_code', title: '工号', width: 80}, {field: 'employee_name', title: '姓名', width: 80}, {field: 'sp_name', title: '职位', width: 80}, {field: 'hg_name', title: '职等', width: 64}, {field: 'lv_num', title: '职级', width: 64}, {field: 'orgname', title: '机构', width: 200}, {field: 'emplev', title: '人事层级', width: 80, formatter: comUrl_dic960.formator}, {field: 'begin_date', title: '开始时间', width: 150, formatter: $fieldDateFormatorYYYY_MM_DD_HH_MM}, {field: 'end_date', title: '结束时间', width: 150, formatter: $fieldDateFormatorYYYY_MM_DD_HH_MM}, {field: 'wodays', title: '调休天数', width: 64}, {field: 'reason', title: '调休原因', width: 150}, {field: 'remark', title: '备注', width: 100}, {field: 'stat', title: '流程状态', width: 64, formatter: comUrl_dic227.formator}, {field: 'creator', title: '制单人', width: 100}, {field: 'createtime', title: '制单时间', width: 150}, {field: 'updator', title: '更新人', width: 64}, {field: 'updatetime', title: '更新时间', findtype: 'datetime', width: 150} ]; var wotimeeditor = { type: "numberbox", options: "min:0,precision:0" }; var gdLinesColumns = [ {field: 'lbname', title: '标题', width: 80}, {field: 'stype', title: '源类型', width: 64, formatter: comUrl_dic1019.formator}, {field: 'sccode', title: '源编码', width: 100}, {field: 'alllbtime', title: '可调休(H)', width: 64}, {field: 'usedlbtime', title: '已调休(H)', width: 64}, {field: 'wotime', title: '本次调休(H)', width: 64, editor: wotimeeditor} ]; var wjbgdate = undefined, wjeddate = undefined; frmOptions = { JPAClass: "com.hr.attd.entity.Hrkq_wkoff", JPAIdField: "woid", allowAtt: true, allowWF: true, windowWidth: '100%', windowHeight: '100%', gdLinesColumns: gdLinesColumns, gdLinesName: "hrkq_wkoffsourses", datainfo_line_title: "调休时间来源", htmlTemeType: HtmlTempType.htMLPop, allow_copy: false, allow_expt_list: true, disableButtonType: _NUBType.hide, OnReady: function () { wjbgdate = getAttparm("WJBEGINDATE"); wjeddate = getAttparm("WJENDDATE"); var tb = mainline.lineToolBar(); tb.splice(0, 1); tb.push({ text: '自动分配', iconCls: 'icon-add', handler: function () { fplb(); } }); $("#detail_main_grid_id").datagrid({toolbar: tb}); setDatetimev(mainline.getInput("begin_date")); setDatetimev(mainline.getInput("end_date")); }, onNew: function (jsondata) { if ((wjbgdate == undefined) || (wjeddate == undefined)) { $.messager.alert('错误', "参数获取错误，检查网络", 'error'); throw new Error("数据检查失败，终止新建!"); } jsondata.schtype = 1; jsondata.execstat = 1; jsondata.filstrato = 0; mainline.setReadOnly("schtime", true); }, onAddLine: function (append) { }, onEditChanged: function (fdname, newValue, oldValue) { if ((fdname == 'begin_date') || (fdname == 'end_date') || (fdname == 'wodays')) { cleardatas(); var begin_date = mainline.getFieldValue("begin_date"); var end_date = mainline.getFieldValue("end_date"); if ((!$isEmpty(begin_date)) && (!$isEmpty(end_date))) { begin_date = (new Date()).fromStr(begin_date).getTime(); end_date = (new Date()).fromStr(end_date).getTime(); if (end_date <= begin_date) { mainline.setFieldValue("end_date", undefined); alert("结束日期错误"); } } } if (fdname == "emplev") { mainline.setFieldValue("er_id", ""); mainline.setFieldValue("employee_code", ""); mainline.setFieldValue("employee_name", ""); mainline.setFieldValue("ospid", ""); mainline.setFieldValue("lv_num", ""); } }, beforeSave: function () { if (!checkdata()) throw new Error("数据检查失败，终止保存!"); } }; function getAttparm(pname) { var rst = undefined; var url = _serUrl + "/web/hrkq/cmn/getAttParm.co?parmcode=" + pname; $ajaxjsonget(url, function (jsdata) { rst = jsdata.value; }, function (err) { alert(JSON.stringify(err)); }, false); return rst; } function setDatetimev(input) { $(input).datebox('calendar').calendar({ validator: function (date) { var now = new Date(); var d1 = new Date(now.getFullYear(), now.getMonth(), 1); var d2 = new Date(now.getFullYear(), now.getMonth(), 31); return d1 <= date && date <= d2; } }); } function fplb() { var er_id = mainline.getFieldValue("er_id"); if ((!er_id) || (er_id.length == 0)) { $.messager.alert('错误', "先选择员工", 'error'); return; } var wodays = mainline.getFieldValue("wodays"); if ((!wodays) || (wodays.length == 0)) { $.messager.alert('错误', "先输入调休天数", 'error'); return; } wodays = parseFloat(wodays); if (((wodays * 10) % 5) != 0) { alert("调休天数最小单位为半天"); return; } var rows = $("#detail_main_grid_id").datagrid("getRows"); var sxwodays = wodays * 8; for (var i = rows.length - 1; i >= 0; i--) { var row = rows[i]; var canxdays = parseFloat(row.alllbtime) - parseFloat(row.usedlbtime); if (canxdays > sxwodays) { row.wotime = sxwodays; sxwodays = 0; } else { row.wotime = canxdays; sxwodays = sxwodays - canxdays; } if (sxwodays == 0) break; } if (sxwodays > 0) { alert("可调休时间不够！"); return; } else { $("#detail_main_grid_id").datagrid("loadData", rows); } } function cleardatas() { var rows = $("#detail_main_grid_id").datagrid("getRows"); for (var i = rows.length - 1; i >= 0; i--) { var row = rows[i]; row.wotime = 0; } $("#detail_main_grid_id").datagrid("loadData", rows); } function checkdata() { var wodays = mainline.getFieldValue("wodays"); if ((!wodays) || (wodays.length == 0)) { $.messager.alert('错误', "先输入调休天数", 'error'); return; } wodays = parseFloat(wodays); if (((wodays * 10) % 5) != 0) { alert("调休天数最小单位为半天"); return; } var rows = $("#detail_main_grid_id").datagrid("getRows"); var sumwotime = 0; for (var i = rows.length - 1; i >= 0; i--) { var row = rows[i]; if ((parseInt(row.wotime) + parseInt(row.usedlbtime)) > parseInt(row.alllbtime)) { alert("本次调休时间大于可调休时间"); return false; } sumwotime = sumwotime + parseInt(row.wotime); } if (sumwotime != (wodays * 8)) { alert("【调休天数】不等了所有行的【本次累计】之和"); return false; } return true; } function onAppendWoline() { var er_id = mainline.getFieldValue("er_id"); if ((!er_id) || (er_id.length == 0)) { $.messager.alert('错误', "先选择员工", 'error'); return; } var begin_date = mainline.getFieldValue("begin_date"); var end_date = mainline.getFieldValue("end_date"); begin_date = (new Date()).fromStr(begin_date).getTime(); end_date = (new Date()).fromStr(end_date).getTime(); var now = new Date(); var d1 = (new Date(now.getFullYear(), 6, 1)).getTime(); var d2 = (new Date(now.getFullYear(), 9, 31)).getTime(); var isspecdate = (((begin_date > d1) && (begin_date < d2)) || ((end_date > d1) && (end_date < d2))); var url = _serUrl + "/web/hrkq/leaveblc/geterleavelblc.co?er_id=" + er_id + "&isv=true"; $ajaxjsonget(url, function (jsdata) { if (isspecdate) { for (var i = 0; i < jsdata.length; i++) { var r = jsdata[i]; if ((parseInt(r.stype) == 1) || (parseInt(r.stype) == 5)) { jsdata.splice(i, 1); } } } var datas = []; for (var i = 0; i < jsdata.length; i++) { var r = jsdata[i]; var row = {}; row.lbid = r.lbid; row.lbname = r.lbname; row.stype = r.stype; row.sccode = r.sccode; row.alllbtime = r.alllbtime; row.usedlbtime = r.usedlbtime; row.wotime = 0; datas.push(row); } $("#detail_main_grid_id").datagrid("loadData", datas); }, function (err) { alert(JSON.stringify(err)); }); } var select_Org_pw = undefined; function onSelectOrg() { var url = _serUrl + "/web/user/getOrgsByLged.co?type=gridtree"; var wo = { id: "select_Org_pw", coURL: url, orderStr: " orgid asc ", multiRow: false, isTree: true, idField: 'orgid', pidField: 'superid', treeField: 'code', showTitle: false, extParms: [ {parmname: 'stat', reloper: '=', parmvalue: '1'} ], width: "500px", height: "400px", gdListColumns: [ {field: 'code', title: '编码', width: 120}, {field: 'orgname', title: '机构', width: 100} ], onResult: function (rows) { if (rows.length > 0) { var row = rows[0]; mainline.setFieldValue('orgid', row.orgid); mainline.setFieldValue('orgcode', row.code); mainline.setFieldValue('orgname', row.extorgname); mainline.setFieldValue('idpath', row.idpath); mainline.setFieldValue("er_id", ""); mainline.setFieldValue("employee_code", ""); mainline.setFieldValue("employee_name", ""); mainline.setFieldValue("ospid", ""); mainline.setFieldValue("lv_num", ""); var url = _serUrl + "/web/hr/employee/findOrgHrlev.co?orgid=" + row.orgid; $ajaxjsonget(url, function (jsdata) { mainline.setFieldValue('orghrlev', jsdata.hrlev); }, function (err) { alert(JSON.stringify(err)); }); } } }; if (!select_Org_pw) { select_Org_pw = new TSearchForm(wo); } select_Org_pw.show(); } function checkWJDate(emp) { var begin_date = (new Date()).fromStr(mainline.getFieldValue("begin_date")); var end_date = (new Date()).fromStr(mainline.getFieldValue("end_date")); if (parseInt(emp.wfbusyss) == 1) { var wbdate = (new Date()).fromStr(begin_date.format("yyyy") + "-" + wjbgdate); var wedate = (new Date()).fromStr(begin_date.format("yyyy") + "-" + wjeddate); if ((begin_date.getTime() >= wedate.getTime()) || (end_date.getTime() < wbdate.getTime())) { return true; } else { $.messager.alert('错误', "休假不允许在生产旺季【" + wjbgdate + "到" + wjeddate + "】期间", 'error'); return false; } } else return true; } function getEmplevParms(emplev) { if (emplev == 1) { return [{parmname: 'lv_num', reloper: '=', parmvalue: '1.1'}]; } else if (emplev == 2) { return [{parmname: 'lv_num', reloper: '>=', parmvalue: '1.2'}, {parmname: 'lv_num', reloper: '<=', parmvalue: '1.3'}]; } else if (emplev == 3) { return [{parmname: 'lv_num', reloper: '=', parmvalue: '2'}]; } else if (emplev == 4) { return [{parmname: 'lv_num', reloper: '>=', parmvalue: '2'}, {parmname: 'lv_num', reloper: '<=', parmvalue: '2.3'}]; } else if (emplev == 5) { return [{parmname: 'lv_num', reloper: '>=', parmvalue: '3'}, {parmname: 'lv_num', reloper: '<=', parmvalue: '3.3'}]; } else if (emplev == 6) { return [{parmname: 'lv_num', reloper: '>=', parmvalue: '4'}, {parmname: 'lv_num', reloper: '<', parmvalue: '9'}]; } } var select_employee_pw = undefined; function onFindemployee() { var emplev = mainline.getFieldValue("emplev"); if ((!emplev) || (emplev.length == 0)) { $.messager.alert('错误', "请先选择人事层级！", 'error'); return; } emplev = parseInt(emplev); var extp = getEmplevParms(emplev); var begin_date = mainline.getFieldValue("begin_date"); var end_date = mainline.getFieldValue("end_date"); if (($isEmpty(begin_date)) || ($isEmpty(end_date))) { $.messager.alert('错误', "请先选择调休时间段！", 'error'); return; } var orgid = mainline.getFieldValue("orgid"); var orgp = ((!orgid) || (orgid.length == 0)) ? "" : "?orgid=" + orgid; var url = _serUrl + "/web/hr/employee/findEmoloyeeList.co" + orgp; var wo = { id: "select_employee_pw", coURL: url, orderStr: " orgid asc ", multiRow: false, idField: 'er_id', autoFind: false, gdListColumns: [ {field: 'orgname', title: '机构', width: 120}, {field: 'employee_code', title: '工号', width: 120}, {field: 'employee_name', title: '姓名', width: 100} ], onResult: function (rows) { if (rows.length > 0) { var row = rows[0]; if (!checkWJDate(row)) return; mainline.setFieldValue('er_id', row.er_id); mainline.setFieldValue('employee_code', row.employee_code); mainline.setFieldValue('employee_name', row.employee_name); mainline.setFieldValue('ospid', row.ospid); mainline.setFieldValue('ospcode', row.ospcode); mainline.setFieldValue('sp_name', row.sp_name); mainline.setFieldValue('lv_num', row.lv_num); mainline.setFieldValue('hg_name', row.hg_name); mainline.setFieldValue('orgid', row.orgid); mainline.setFieldValue('orgcode', row.orgcode); mainline.setFieldValue('orgname', row.orgname); mainline.setFieldValue('idpath', row.idpath); mainline.setFieldValue("resdate", ""); var url = _serUrl + "/web/hr/employee/findOrgHrlev.co?orgid=" + row.orgid; $ajaxjsonget(url, function (jsdata) { mainline.setFieldValue('orghrlev', jsdata.hrlev); }, function (err) { alert(JSON.stringify(err)); }); onAppendWoline(); } } }; if (!select_employee_pw) { select_employee_pw = new TSearchForm(wo); } select_employee_pw.extendOptions({ coURL: url, extParms: extp, }); select_employee_pw.show(); } </script> <div id="loading" style="position: absolute;z-index: 1000;top: 0px;left: 0px;width: 100%;height: 100%;text-align: center;padding-top: 20%;background-color:white;font-size: 12px"> 界面加载中... ... </div> <style type="text/css">#maindata_id td {padding-left: 5px;padding-right: 10px;padding-top: 5px;padding-bottom: 5px;}</style> <script id="findline" type="text/html"><tr style="height: 20px;padding: 0px" id="{{rowid}}"><td style="width: 30%"><input class="easyui-combobox" fieldname="parmname" style="height: 20px"data-options="{{parmnameData}},width:120,onSelect:mainline.find_window_selectparmname"></td><td style="width: 20%"><input class="easyui-combobox" fieldname="reloper" style="height: 20px"data-options="{{reloperData}},width:60,editable:false"></td><td style="width: 30%" tdtype="parmvalue"><input class="easyui-textbox" fieldname="parmvalue" data-options="width:120" style="height: 20px"></td><td style="width: 20%;text-align: center"><a href="#" onclick="mainline.find_window_del_click(this)">删除</a></td></tr></script> <div id="mlp_main_sayout" class="easyui-layout" data-options="fit:true,border:false"> <div data-options="region:'north',border:true,split:false" style="padding: 0px;height: auto;border-left: 0px;border-top: 0px;border-right: 0px;overflow: hidden"> <div class="easyui-panel" data-options="border:false" style="width: 100%; padding:5px;overflow: hidden"> <a id="id_bt_new" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-ml_add'">新建</a> <span class="button-sep"></span> <a id="id_bt_copy" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-copy'">复制</a> <span class="button-sep"></span> <a id="id_bt_find" href="javascript:void(0)" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-ml_find'">查找</a> <span class="button-sep"></span> <a id="id_bt_expt_list" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-ml_excel'">导出列表</a> <span class="button-sep"></span> </div> </div> <div data-options="region:'center',border:false" style="padding: 0px"> <table id="dg_datalist_id" style="height: 100%;width: 100%" data-options="rownumbers:true,remoteSort:false,fit:true,border:false,singleSelect: true"> </table> </div> </div> <div id="datainfo_window_id" class="easyui-window" data-options="modal:true,title:'详情',closed:true,border:true,collapsible:false,minimizable:false,iconCls:'icon-mylocation'" style="width:100%;height:100%;overflow:hidden"> <div id="cc" class="easyui-layout" data-options="fit:true"> <div data-options="region:'north',split:false,border:true" style="height:40px;border-left: 0px;border-top: 0px;border-right: 0px;overflow: hidden"> <div class="easyui-panel" data-options="border:false" style="width: 100%; padding:5px;overflow: hidden"> <a id="id_bt_save" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-save'">保存</a> <a id="id_bt_submit" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-submit'">提交</a> <span class="button-sep"></span> <a id="id_bt_reload" href="javascript:void(0)" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-reload'">刷新</a> <span class="button-sep"></span> <a id="id_bt_del" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-ml_del'">删除</a> <span class="button-sep"></span> <a id="id_bt_att" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-ml_attach'">上传附件</a> <span class="button-sep"></span> <a id="id_bt_print" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-print'">打印</a> <a id="id_bt_expt" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-ml_excel'">导出</a> <span class="button-sep"></span> <a id="id_bt_exit" href="javascript:void(0)" class="easyui-linkbutton" style="display: none" data-options="plain:true,iconCls:'icon-exit'">返回</a> </div> </div> <div data-options="region:'center',border:false" style="padding:0px;overflow-x: hidden;overflow-y: auto"> <div id="main_form_div_id"> <table id="maindata_id" border="0" style=""> <tbody> <tr> <td cjoptions="fdname:'wocode'">调休编码</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'wocode',readonly:true,crequired:true" style="height:20px;width: 100px"></td> <td cjoptions="fdname:'employee_name'">姓名</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'employee_name',readonly:true,crequired:true" style="height:20px;width: 100px"></td> <td cjoptions="fdname:'stat'">流程状态</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'stat',readonly:true,comidx:'dic227',editable:false" style="height:20px;width: 100px"> </td> </tr> <tr> <td cjoptions="fdname:'orgname'">机构</td> <td colspan="3"><input cjoptions="easyui_class:'easyui-textbox',fdname:'orgname',crequired:true,buttonIcon:'icon-search',onClickButton:onSelectOrg,editable:false" style="height:20px;width: 300px"></td> <td cjoptions="fdname:'emplev'">人事层级</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'emplev',crequired:true,comidx:'dic9',editable:false" style="height:20px;width: 100px"></td> <td cjoptions="fdname:'employee_code'">工号</td> <td> <input cjoptions="easyui_class:'easyui-textbox',fdname:'employee_code',crequired:true,buttonIcon:'icon-search',onClickButton:onFindemployee,editable:false" style="height:20px;width: 100px"> </td> </tr> <tr> <td cjoptions="fdname:'sp_name'">职位</td> <td><input cjoptions="easyui_class:'easyui-textbox',readonly:true,fdname:'sp_name'" style="height:20px;width: 100px"></td> <td cjoptions="fdname:'hg_name'">职等</td> <td><input cjoptions="easyui_class:'easyui-textbox',readonly:true,fdname:'hg_name'" style="height:20px;width: 100px"></td> <td cjoptions="fdname:'lv_num'">职级</td> <td><input cjoptions="easyui_class:'easyui-textbox',readonly:true,fdname:'lv_num'" style="height:20px;width: 100px"></td> </tr> <tr> <td cjoptions="fdname:'begin_date'">开始时间</td> <td colspan="2"> <input cjoptions="easyui_class:'easyui-datetimebox',fdname:'begin_date',crequired:true,editable:false,formatter:$dateformattostrrYYYY_MM_DD_HH_MM" style="height:20px;width: 150px"> </td> <td cjoptions="fdname:'end_date'">结束时间</td> <td colspan="2"><input cjoptions="easyui_class:'easyui-datetimebox',fdname:'end_date',crequired:true,editable:false,formatter:$dateformattostrrYYYY_MM_DD_HH_MM" style="height:20px;width: 150px"></td> <td cjoptions="fdname:'wodays'">调休天数</td> <td><input cjoptions="easyui_class:'easyui-numberbox',fdname:'wodays',readonly:false,crequired:true,min:0,precision:1" style="height:20px;width: 100px"></td> </tr> <tr> <td cjoptions="fdname:'reason'">调休原因</td> <td colspan="3"><input cjoptions="easyui_class:'easyui-textbox',fdname:'reason',crequired:true" style="height:20px;width: 300px"></td> <td cjoptions="fdname:'remark'">备注</td> <td colspan="3"> <input cjoptions="easyui_class:'easyui-textbox',fdname:'remark',multiline:false" style="height:20px;width: 300px"> </td> </tr> <tr> <td cjoptions="fdname:'creator'">制单人</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'creator',readonly:true" style="height:20px;width: 120px"> </td> <td cjoptions="fdname:'createtime'">制单时间</td> <td><input cjoptions="easyui_class:'easyui-datetimebox',fdname:'createtime',readonly:true,formatter:$dateformattostr,editable:false" style="height:20px;width: 120px"></td> <td cjoptions="fdname:'updator'">更新人</td> <td><input cjoptions="easyui_class:'easyui-textbox',fdname:'updator',readonly:true" style="height:20px;width: 120px"> </td> <td cjoptions="fdname:'updatetime'">更新时间</td> <td><input cjoptions="easyui_class:'easyui-datetimebox',fdname:'updatetime',readonly:true,formatter:$dateformattostr" style="height:20px;width: 120px"></td> </tr> </tbody> </table> </div> <div id="detail_main_grid_div"> <div class="datainfo_title">明细数据 </div> <div style="width: 100%;height: 300px"> <table id="detail_main_grid_id" data-options="rownumbers:true,remoteSort:false,fit:true"></table> </div> </div> <div id="dg_att_div"> <div class="datainfo_title">附件 </div> <div style="width: 100%;height: 200px"> <table id="dg_att_id" data-options="rownumbers:true,fitColumns:false,border:false,singleSelect: true,fit:true"></table> <div id="ContextMenu" class="easyui-menu"> <div id="id_bt_delatt" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ml_del'">删除 </div> <div id="id_bt_downloadatt" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-ml_download'">下载 </div> </div> </div> </div> <div id="main_tab_wf_div" style="width: 100%"> <div class="datainfo_title">流程 </div> <div id="main_tab_wf_id" title="流程" style="width:100%;height:500px;overflow: hidden"> </div> </div> </div> </div> </div> <div id="find_window_id" class="easyui-window" data-options="modal:true,title:'条件',closed:true,border:true,collapsible:false,minimizable:false,iconCls:'icon-search'" style="width:400px;height:350px;;overflow: hidden"> <div class="easyui-layout" data-options="fit:true,border:false" style="padding: 0px;"> <div data-options="region:'center',border:false,title:' ',tools:'#toolbar_dg_find_window_parms_id'" style="padding:0px;margin: 0px auto"> <table id="dg_find_window_parms_id" style="width: 100%;height: auto"> <thead> <tr class="datagrid-header" style="height: 20px;padding: 0px;text-align: center "> <th style="width: 30%">项目</th> <th style="width: 20%">关系</th> <th style="width: 30%">项目值</th> <th style="width: 20%">操作</th> </tr> </thead> <tbody> </tbody> </table> </div> <div data-options="region:'south',border:true" style="text-align:right;padding: 5px;height: auto;border-left: 0px;border-right: 0px;border-bottom: 0px"> <a class="easyui-linkbutton" onclick="mainline.find_window_ok_click();" data-options="iconCls:'icon-ok'" style="width:80px">确定</a> <a class="easyui-linkbutton" onclick="$('#find_window_id').window('close');" data-options="iconCls:'icon-cancel'" style="width:80px">取消</a> </div> </div> </div> <div id="toolbar_dg_find_window_parms_id" style="height:auto"> <a href="#" class="icon-add" onclick="mainline.find_window_add_click()"></a> </div> <div id="common_divs_id" style="display: none"> <div id="pw_uploadfile" class="easyui-window" title="上传文件" data-options="modal:true,closed:true,iconCls:'icon-save'" style="width:400px;height:400px;padding:0px;"> <iframe frameborder="0" style="width: 100%;height: 95%"></iframe> </div> <div id="pw_list_select" class="easyui-window" title="请选择模板" data-options="modal:true,closed:true,iconCls:'icon-save'" style="width:300px;height:300px;padding:0px;"> <ul class="corsair_list"> <li><span>fdsa</span></li> </ul> </div> </div> <style type="text/css">.corsair_list {list-style-type: none;text-indent: 0;margin: 2px;padding: 2px;}.corsair_list li {font-size: 10pt;background: linear-gradient(to bottom, #ffffff 0px, #eeeeee 100%) repeat-x scroll 0 0 rgba(0, 0, 0, 0);color: #444;overflow: visible;border: 1px solid #ffffff;height: 25px;line-height: 25px;margin-bottom: 5px;cursor: pointer;}.corsair_list li span {padding-left: 3px;}.corsair_list li:hover {background: none repeat scroll 0 0 #eaf2ff;}.datainfo_title {height: 20px;background-color: #E8EEFA;color: #0e2d5f;font-size: 12px;line-height: 20px;font-weight: bold;padding-left: 10px;border-bottom: 1px solid #DDDDDD;}</style> </body></html>